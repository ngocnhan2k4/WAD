<section class="pt-5 pb-5">
  <div class="container-cart">
    <div class="row w-100">
      <div class="col-lg-12 col-md-12 col-12">
        <h3 class="text-center shopping-cart-title smb-4 display-5 font-weight-bold">Shopping Cart</h3>
        <p class="mb-5 text-center text-muted">
          <b class="text-info">{{itemCount}}</b>  items in your cart
        </p>
        <table id="shoppingCart" class="table table-condensed" style="width: 100%;">
          <thead>
            <tr>
              <th style="width:40%">Product</th>
              <th style="width:15%">Unit Price</th>
              <th style="width:12%">Quantity</th>
              <th style="width:15%">Total Price</th>
              <th style="width:18%">Actions</th>
            </tr>
          </thead>
          <tbody>
            {{#each cartItems}}
            <tr id="row-{{this.Product.product_id}}">
              <input type="hidden" id="product-id-{{this.Product.product_id}}" value="{{this.Product.product_id}}">
              <td data-th="Product">
                <div class="flex d-flex align-items-center">
                  <div class="text-left col-md-4 d-flex cart-product-image">
                    <img src="{{this.Product.Images.[0].directory_path}}" alt="{{this.Product.product_name}}"
                      class="mb-2 rounded-lg shadow img-fluid d-none d-md-block"
                      style="max-width: 100%; max-height: 150px; object-fit: cover; justify-self: center;">
                  </div>
                  <div class="ml-3 text-left col-md-8 mt-sm-2">
                    <h4 class="font-weight-bold">{{this.Product.product_name}}</h4>
                    <p class="text-muted">Brand: {{this.Product.Suppliers.brand}}</p>
                  </div>
                </div>
              </td>
              <td data-th="Price" style="text-align: center">
                <span id="price-{{this.Product.product_id}}"
                  class="font-weight-bold">${{this.Product.current_price}}</span>
              </td>
              <td data-th="Quantity" style="justify-content: center; text-align: center;">
                <input type="number" id="quantity-{{this.Product.product_id}}"
                  class="text-center form-control form-control-lg quantity-input" value="{{this.quantity}}" min="1" step="1"
                  style="max-width: 100px; display: inline-block; padding: 10px; font-size: 16px;">
              </td>
              <td style="text-align: center">
                <span id="total-price-{{this.Product.product_id}}" class="font-weight-bold">${{this.price}}</span>
              </td>
              <td class="actions" data-th="">
                <div class="text-center">
                  <button id="delete-{{this.Product.product_id}}"
                    class="mb-2 bg-white btn btn-white border-secondary btn-md rounded-circle">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
            {{/each}}
          </tbody>
        </table>

        <hr style="border-top: 1px solid #ccc; margin-top: 30px; margin-bottom: 20px;">

        <div class="float-right mt-4 text-right">
          <h4 class="font-weight-bold subtotal-text">Subtotal:</h4>
          <h1 class="font-weight-bold subtotal-value">${{subtotal}}</h1>
          <!-- Nút Checkout bên dưới Subtotal -->
          <button id="checkout-button" class="mt-3 btn" onmouseover="this.style.backgroundColor='#218838'; this.style.transform='scale(1.05)';"
            onmouseout="this.style.backgroundColor='#28a745'; this.style.transform='scale(1)';">
            Checkout
          </button>
        </div>
      </div>
    </div>
</section>
<script>
  window.orderData = {
    subtotalVND: {{ subtotalVND }},
    orderID: {{ orderID }}
    };
</script>
<script type="module" src="/js/cart.js"></script>